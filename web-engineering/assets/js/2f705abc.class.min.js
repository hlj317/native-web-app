webpackJsonp([4],{

/***/ 0:
/***/ function(module, exports, __webpack_require__) {

	__webpack_require__(24);

	var $YS = __webpack_require__(18),
	    $SU = __webpack_require__(19),
	    cityCode = $YS.getParam['cityCode'] || false,
	    channel = $YS.getParam['channel'] || false,
	    channelLevel = $YS.getParam['channelLevel'] || false,
	    title = $YS.getParam['title'] || '',
	    lat = $YS.getParam['lat'] || '',
	    lon = $YS.getParam['lon'] || '',
	    videoSort = 0,
	    page = 0,
	    pageSize = 16,
	    loading = false,
	    loaded = false,
	    search_img = $("#search_img").attr("src",__webpack_require__(26)),
	    sicon_arrows = $("#sicon_arrows").attr("src",__webpack_require__(27)),
	    selected_img = $(".selected_img").attr("src",__webpack_require__(28)),
	    p0_img = $("#p0_img").attr("src",__webpack_require__(29)),
	    no_content_img = $("#no_content_img").attr("src",__webpack_require__(30)),

	    openSort = function() {
	        $('#sortSwitch, #sortPage').addClass('on');
	    },

	    closeSort = function() {
	        $('#sortSwitch, #sortPage').removeClass('on');
	    },

	    loadList = function() {
	        var ajaxData = {};

	        if(loaded) {
	            return;
	        }

	        loading = true;

	        ajaxData['pageNo'] = page;
	        ajaxData['pageSize'] = pageSize;
	        ajaxData['orderBy'] = videoSort;

	        if(lat != '') {
	            ajaxData['latitude'] = lat;
	            ajaxData['longitude'] = lon;
	        }

	        if(cityCode) {
	            ajaxData['cityCode'] = cityCode;
	        }

	        if(channelLevel && channel) {
	            if(channelLevel == 1) {
	                ajaxData['category'] = channel;
	            } else if(channelLevel == 2) {
	                ajaxData['subCategory'] = channel;
	            }
	        }
	        $.ajax({
	            url: $SU.urls.list,
	            data: ajaxData,
	            type: 'POST',
	            success: function(data) {
	                renderList(data);
	            }
	        });

	        page++;
	    },

	    renderList = function(data) {
	        if(data.resultCode == 0) {
	            var
	                htmlStr = '',
	                imgIds = '',
	                datas = data.data;

	            for(var i = 0; i < datas.length; i++) {
	                var videoData = $SU.getVideoInfo(datas[i], data.resultCode);

	                videoData['info'] = encodeURIComponent(JSON.stringify(videoData));
	                if (datas[i].prevue) {
	                    videoData['markClass'] = 'onPrevue';
	                    videoData['markStr'] = '预告';
	                } else if(videoData['videoType'] == 2) {
	                    videoData['markClass'] = '';
	                    videoData['markStr'] = '';
	                } else if(videoData['videoType'] == 1) {
	                    videoData['markClass'] = 'on';
	                    videoData['markStr'] = '短片';
	                }
	                videoData['imgId'] = 'listVideoImg' + videoData['id'];
	                videoData['avatarId'] = videoData['imgId'] + '_avatar';

	                htmlStr += $SU.tplFun_videoItem(videoData);
	                imgIds += '#' + videoData['imgId'] + ',';
	            }

	            $('#videoBox').append(htmlStr);

	            imgIds = imgIds.substr(0, imgIds.length - 1);
	            $(imgIds).on('load', function(){
	                $(this).addClass('on');
	            });

	            if(datas.length < pageSize) {
	                loaded = true;
	                $('#loading').removeClass("show");
	            }

	            if(datas.length <= 0 && page <= 1) {
	                $('#main').hide();
	                $('#noContent').show();
	            }
	        } else {
	            $('#loading').removeClass("show");
	        }

	        loading = false;
	    },

	    tapHandle_search = function() {
	        var
	            paramStr = $.param($YS.getParam);
	        urlStr = 'search' + (paramStr === '' ? '' : '?' + paramStr);
	        $SU.openUrl(urlStr);
	    },

	    tapHandle_sortSwitch = function(e) {
	        if($('#sortSwitch').hasClass('on')) {
	            closeSort();
	        } else {
	            openSort();
	        }
	    },

	    tapHandle_sortPage = function(e) {
	        e.stopPropagation()
	        var
	            target = e.target,
	            targetName = target.nodeName.toLowerCase()
	        sortData = $(target).data('sort');

	        if(targetName === 'li') {
	            videoSort = sortData;
	            $('#sortPage ul li').removeClass('on');
	            $(target).addClass('on');

	            $('#sortSwitch .text').text($(target).text());
	            console.log()

	            //重置参数
	            page = 0;
	            loaded = false;
	            loading = false;
	            $('#videoBox').html('');
	            $('#loading').removeClass("show");
	            loadList();
	        }

	        closeSort();
	    },

	    tapHandle_list = function(e) {
	        var
	            inVideo = false,
	            target = e.target,
	            targetNode = null,
	            checkInVideo = function(target) {
	                var
	                    nodeName = target.nodeName.toLocaleLowerCase(),
	                    nodeId = $(target).attr('id'),
	                    className = $(target).attr('class');

	                if(nodeName === 'dl' && className === 'videoItem') {
	                    inVideo = true;
	                    targetNode = $(target);
	                    return;
	                } else if(nodeId === 'list') {
	                    inVideo = false;
	                    return;
	                } else {
	                    checkInVideo(target.parentNode);
	                }
	            };

	        checkInVideo(target);

	        if(inVideo) {
	            var videoInfo = targetNode.data('info');
	            videoInfo = decodeURIComponent(videoInfo);
	            $SU.openPlayer(videoInfo);
	        }
	    },

	    init = function() {
	        if(title != '') {
	            title = title.replace(/\./g, '%');
	            title = decodeURIComponent(decodeURIComponent(title));
	            document.title = title;
	        }

	        if(document.styleSheets[0].insertRule) {
	            var
	                windowW = $(window).width(),
	                videoImgW = windowW * 0.4796,
	                videoImgH = videoImgW / 16 * 9;

	            $SU.addCssRule('dl.videoItem dt {height: ' + videoImgH + 'px;}');
	            $SU.addCssRule('dl.videoItem dt img {height: ' + videoImgH + 'px;}');
	        }

	        $('#main').addClass('on');

	        $('#loading').addClass("show");
	        loadList();

	        //如果没有坐标按默认排序
	        if(lat === '') {
	            $('#locationSort').data('sort', 0);
	        }

	        //事件绑定
	        $('#search .input').on('click', tapHandle_search);
	        $('#sortSwitch').on('click', tapHandle_sortSwitch);
	        $('#sortPage').on('click', tapHandle_sortPage);
	        $('#list').on('click', tapHandle_list);
	        $SU.setScrollLoad(function() {
	            if(!loading) {
	                loadList();
	            }
	        });

	        /************分享属性*************/
	        !(function() {
	            var
	                param = '',
	                getParam = function(name,url) {
	                    var r = new RegExp("(\\?|#|&)"+name+"=(.*?)(#|&|$)");
	                    var m = (url || location.href).match(r);
	                    return (m ? m[2] : '');
	                },
	                addParam = function(key, decode) {
	                    var
	                        decode = decode || false,
	                        val = getParam(key);

	                    if(decode) {
	                        val = decodeURIComponent(val).replace(/%/g, '.');
	                    }

	                    if(getParam(key) != '') {
	                        if(param === '') {
	                            param += '?'+ key +'=' + val;
	                        } else {
	                            param += '&'+ key +'=' + val;
	                        }
	                    }
	                };

	            addParam('channel');
	            addParam('channelLevel');
	            addParam('title', true);

	            window.shareObj = {
	                title: getParam('title') != '' ? decodeURIComponent(decodeURIComponent(getParam('title').replace(/\./g, '%'))) : '萤石直播',
	                desc: '来自萤石直播分享',
	                imgUrl: 'http://weixin.ys7.com/src/img/logo.png',
	                link: encodeURI('http://' + window.location.host + '/class' + param)
	            };
	        }());

	        /************微信分享*************/
	        !(function() {
	            var ua = navigator.userAgent.toLowerCase();
	            if(ua.match(/MicroMessenger/i) == "micromessenger") {
	                var wxReady = function() {
	                    wx.showOptionMenu();
	                    wx.onMenuShareTimeline(shareObj);
	                    wx.onMenuShareAppMessage(shareObj);
	                    wx.onMenuShareQQ(shareObj);
	                    wx.onMenuShareWeibo(shareObj);
	                };

	                window.weixinVerifyCallback = function(res) {
	                    if(res.result && res.result.code == 200) {
	                        wx.config({
	                            appId: res.result.data.appId,
	                            timestamp: Number( res.result.data.timestamp ),
	                            nonceStr: res.result.data.noncestr,
	                            signature: res.result.data.signature,
	                            jsApiList: ['showOptionMenu',
	                                'onMenuShareTimeline',
	                                'onMenuShareAppMessage',
	                                'onMenuShareQQ',
	                                'onMenuShareWeibo']
	                        });

	                        wx.ready(wxReady);
	                    }
	                }

	                var script = document.createElement('script');
	                var pageUrl = window.location.href.split('#')[0].replace(/&/g, "%26");

	                script.src = "http://weixin.ys7.com/api/js/getJsonpSignature?jsoncallback=weixinVerifyCallback&pageUrl=" + pageUrl;
	                document.body.appendChild(script);
	            }
	        }());

	        /************配置H5页面，右上角APP菜单*************/
	        var shareObj_app =　{
	            menu: [
	                {type: 'shareTo1',
	                    icon: '',
	                    text: '发送给朋友',
	                    bind: function()　{
	                        YsAppBridge.shareTo({
	                            type: 'url',
	                            target: 'weixin',
	                            title: shareObj.title,
	                            desc: shareObj.desc,
	                            content: shareObj.link,
	                            img: shareObj.imgUrl
	                        });}
	                },{
	                    type: 'shareTo2',
	                        icon: '',
	                        text: '分享到朋友圈',
	                        bind: function() {
	                        YsAppBridge.shareTo({
	                            type: 'url',
	                            target: 'weixin_c',
	                            title: shareObj.title,
	                            desc: shareObj.desc,
	                            content: shareObj.link,
	                            img: shareObj.imgUrl
	                        });
	                    }}
	                ]
	            };

	        if(window.YsAppBridge) {

	            //APP调用，初始化
	            YsAppBridge.init = function(){
	                this.setPageView(shareObj_app);
	            }
	        }

	    };
	$(init);


/***/ },

/***/ 24:
/***/ function(module, exports) {

	// removed by extract-text-webpack-plugin

/***/ },

/***/ 27:
/***/ function(module, exports) {

	module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAANCAYAAABCZ/VdAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpGRTMyMjhFMUQwQTRFMzExQUM3MjgyNkU4QzJCMTk1RSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFOEZBODVEMjBGNEUxMUU1ODNDOUVBRjRBOENEODI1RiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFOEZBODVEMTBGNEUxMUU1ODNDOUVBRjRBOENEODI1RiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjk4MzBDMzhDMTQwOUU1MTFCMTVBQThFMzQyNUQ5RTJDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkZFMzIyOEUxRDBBNEUzMTFBQzcyODI2RThDMkIxOTVFIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Ld43xAAAAT1JREFUeNqs0z8ohHEcx/HnPEUk5ZTyZGC4Mspzw4n8i+SsDBaRLAbJpBuUxebPotTFImERqTNcp3DJJpPRoCwGhluU8P7Vh56urvvd8a1Xd9/fPfd5vs/vdxfyfd+xrFbsYRYPNl+osAxuwxW6cI3of4W34xLN6huQQc9fw2O4QGPeeh3OMVJueB/SqFf/iE7cq6/BCcZLDR9FCrXqzQF24xb9ejVViQPM2IaP4RjV6u/Qi2f1rxjSdplykcRCsfApHGoiUzcYwEvedTnEcao+hA0sFwqfw64mcTTZMN4KbN27nnI/sLaCNd3sN3wJWz+L1Jn2PVfk1/SBSWwH1ha1Ta7reV6CN6uBD48wocls6kuHX6VDN9WBJhOeCuzxDqY1UamV0UCD6iMmPKx/4Sbm8emUX1k8oQXr3wIMAI8rOZzlJgoNAAAAAElFTkSuQmCC"

/***/ },

/***/ 28:
/***/ function(module, exports) {

	module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAhCAYAAACbffiEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpGRTMyMjhFMUQwQTRFMzExQUM3MjgyNkU4QzJCMTk1RSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0QkI1QjBEQTBEREIxMUU1QkJEMkVEQjFEQ0FFQUZGNSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0QkI1QjBEOTBEREIxMUU1QkJEMkVEQjFEQ0FFQUZGNSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjk4MzBDMzhDMTQwOUU1MTFCMTVBQThFMzQyNUQ5RTJDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkZFMzIyOEUxRDBBNEUzMTFBQzcyODI2RThDMkIxOTVFIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+KVXkTgAAA3tJREFUeNrUmMlrFEEUxnvazkLGMTESFJWQg7viRRBBFDwoevDuhpgQ9yVxGZdE3GLc4hpMjChIlCgaFA8K8U/wJIInFWJiFJdsYzbj1n4PvoZicCbds7TdBR+VqXRX169evVevKmCapharFN7s0P5naS+dHG9sC1BthIagWkPzYQHEElRHoXnQAJRh+BBiKapKaBGkQ0GpDZ9BLEN1BFqoND+B6g0fQSxHdRyaz6bfhKiGL70wfACQgUoscRaazeYf0FOoSiCkwfA4RDYhzkHT2TwMtcgSA8Qr61kvg2RCK2iJqWz7CT2DwoB4oz6sexhkpax/aAp/m7TEXuht9MNetcgqqAKaBgWgP9BjaB/UBmuYfgBZC+2H5igQ92XvAEBrrJe8BrIeOgjN5O9f0B3oTDwIL4Fk0hKy2RUp0UkgagDxeqQODIS4GahnQRHoOV7qdxliNLSaEFaWOAg1Qacwnnd2OtEZGR5C96A1AMt1EWKMfBM6oUD0cyzH7EJYIIv5dwF0EioGTNAFiBxoHSEmsG2AEAegj046E5AGqFOBkU62uABSwhA7XrGE+EQY6nLamc7tvxbqZZt0XA6rhNMIsYsb20T+lsPRLUasSCId6liHfajrCNTD2C3rtYwzNirFEHsIUcRvCUQ9fTWSaKc6j5TdqG4wr/nK/00SyxAmFT6TzY1OLF2o+ISshkvQ52Q615XzsfjJdVrmk+Iz5ZzBcUl8Jw/azRTDcuxv0BXoMvQh2VnSow77vTRzjRI18gmyQ3FMJ0UmYxstUcC2Hi7nC8qkpQ6EMIOcJYF5r8R7GchOhzAy8K104rFs6+JkSajvTpXjBUa4DtqurOkA1/RVyX2UKBer5NKSZZwIk34gy7eKR9WEr4Oc5lp1PMxUECbIGc5i21CM9+R4egjarEB84SRUpyOe2zlYNUrOozhkCNrACPevaJbFwZbSKpZPiGNfTNfGZAdEstC7vBBr5xLLU2Dyo3InWXabGOUChJCJuBbHgkkXu2m8pA8PuESsVDvE84PGZTTM65pixRKdhGi04VOugKhZqTjpYV4IhDhwnb5UwrRcY1g9zdSjL92Jm9OD1XfoNmEqeZLLYQBQSwc31gYCal4DsUoTL8kEZi59wSpyw3GeYda1ksx1UDPPEi/pO1JaaQlXIVJxr/WICV8bLwqamXy6Xv4KMAAove1+seH5YAAAAABJRU5ErkJggg=="

/***/ },

/***/ 30:
/***/ function(module, exports, __webpack_require__) {

	module.exports = __webpack_require__.p + "imgs/f13a393c.1_3_7_noContent.jpg";

/***/ }

});